<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Security Alert - CoinTrack</title>
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f5; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;">

    <div style="display: none; max-height: 0; overflow: hidden;">
        Security alert: Important activity detected on your CoinTrack account.
    </div>

    <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f4f4f5;">
        <tr>
            <td align="center" style="padding: 40px 20px;">

                <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="width: 100%; max-width: 560px; background-color: #ffffff; border-radius: 16px; overflow: hidden; border: 1px solid #e4e4e7;">

                    <!-- Red Gradient Bar (Security Alert) -->
                    <tr>
                        <td style="height: 5px; background: linear-gradient(90deg, #dc2626 0%, #ea580c 50%, #f59e0b 100%);"></td>
                    </tr>

                    <!-- Logo & Title -->
                    <tr>
                        <td align="center" style="padding: 40px 40px 24px;">
                            <img th:src="${logoUrl}" alt="CoinTrack" width="64" height="64" style="width: 64px; height: 64px; border-radius: 14px; display: block;">
                            <h1 style="margin: 18px 0 0; font-size: 24px; font-weight: 700; color: #18181b; line-height: 1.3; text-align: center;">
                                üîê Security Alert
                            </h1>
                        </td>
                    </tr>

                    <!-- Content -->
                    <tr>
                        <td style="padding: 0 40px 32px;">
                            <p style="margin: 0 0 18px; font-size: 16px; line-height: 1.65; color: #52525b;">
                                Hey <strong style="color: #18181b;" th:text="${name}">there</strong>,
                            </p>

                            <p style="margin: 0 0 24px; font-size: 16px; line-height: 1.65; color: #52525b;">
                                We detected security-related activity on your CoinTrack account. Here are the details:
                            </p>

                            <!-- Alert Details Box -->
                            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 24px;">
                                <tr>
                                    <td style="padding: 20px; background-color: #fef2f2; border-radius: 12px; border: 1px solid #fecaca; border-left: 4px solid #dc2626;">
                                        <h3 style="margin: 0 0 16px; font-size: 17px; font-weight: 700; color: #991b1b;">
                                            ‚ö†Ô∏è <span th:text="${event}">Security Event</span>
                                        </h3>

                                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0">
                                            <tr>
                                                <td style="padding: 6px 0; font-size: 14px; color: #71717a; width: 40%;">Time</td>
                                                <td style="padding: 6px 0; font-size: 14px; color: #18181b; font-weight: 500; text-align: right;" th:text="${timestamp}">Dec 18, 2024</td>
                                            </tr>
                                            <tr th:each="entry : ${metadata}">
                                                <td style="padding: 6px 0; font-size: 14px; color: #71717a; width: 40%;" th:text="${entry.key}">Key</td>
                                                <td style="padding: 6px 0; font-size: 14px; color: #18181b; font-weight: 500; text-align: right; font-family: 'Courier New', monospace;" th:text="${entry.value}">Value</td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>

                            <p style="margin: 0 0 20px; font-size: 15px; line-height: 1.6; color: #52525b;">
                                If this was you, no action is needed. You can safely ignore this email.
                            </p>

                            <!-- Wasn't You Notice -->
                            <p style="margin: 0; font-size: 15px; line-height: 1.55; color: #dc2626;">
                                <strong>Wasn't you?</strong> Please <a th:href="'mailto:' + ${supportEmail}" style="color: #dc2626; text-decoration: underline; font-weight: 600;">contact support</a> immediately and reset your password to secure your account.
                            </p>
                        </td>
                    </tr>

                    <!-- Divider -->
                    <tr>
                        <td style="padding: 0 40px;">
                            <div style="height: 1px; background-color: #e4e4e7;"></div>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="padding: 24px 40px; background-color: #fafafa; text-align: center;">
                            <p style="margin: 0 0 6px; font-size: 13px; color: #71717a;">
                                Need help? <a th:href="'mailto:' + ${supportEmail}" style="color: #7c3aed; text-decoration: none; font-weight: 500;">Contact Support</a>
                            </p>
                            <p style="margin: 12px 0 0; font-size: 11px; color: #a1a1aa;">
                                ¬© <span th:text="${year}">2024</span> CoinTrack ‚Ä¢ Made with üíú
                            </p>
                        </td>
                    </tr>

                </table>

            </td>
        </tr>
    </table>

</body>
</html>
