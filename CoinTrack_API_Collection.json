{
  "info": {
    "name": "CoinTrack API",
    "description": "Collection for manually testing the CoinTrack API. \n\n**ZERODHA CONNECTION GUIDE:**\nTo connect manually:\n1. Update `CoinTrack_Local_Environment.json` with your API Key/Secret.\n2. Run '1. Setup Credentials'.\n3. Run '2. Get Login Link', copy URL, open in browser.\n4. Login, copy `request_token` from URL.\n5. Run '3. Finalize Connection' with the token.\n\n**LOGIN FLOW:**\n1. Run 'Login'.\n2. Run 'Verify OTP' with the OTP received.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication & User Management",
      "item": [
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "Initiates login. If successful, triggers OTP generation.",
            "url": {
              "raw": "http://localhost:8080/api/auth/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "login"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"usernameOrEmailOrMobile\": \"testuser\",\n  \"password\": \"password123\"\n}"
            }
          }
        },
        {
          "name": "Verify OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "**INSTRUCTIONS**:\n1. Check your backend logs or SMS/Email for the OTP sent after the 'Login' step.\n2. Enter the OTP below.\n3. Send request to get the `accessToken`.\n4. **IMPORTANT**: Copy the `accessToken` into your Environment 'token' variable.",
            "url": {
              "raw": "http://localhost:8080/api/auth/verify-otp",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "verify-otp"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"testuser\",\n  \"otp\": \"YOUR_OTP_HERE\"\n}"
            }
          }
        },
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/auth/register",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "register"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"testuser\",\n  \"email\": \"test@example.com\",\n  \"mobile\": \"9876543210\",\n  \"password\": \"password123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\"\n}"
            }
          }
        },
        {
          "name": "Verify Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/auth/verify-token",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "auth",
                "verify-token"
              ]
            }
          }
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users"
              ]
            }
          }
        },
        {
          "name": "Get User By ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/users/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/users/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"User\"\n}"
            }
          }
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/users/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "users",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Portfolio",
      "item": [
        {
          "name": "Get Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/summary",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "summary"
              ]
            }
          }
        },
        {
          "name": "Get Holdings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/holdings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "holdings"
              ]
            }
          }
        },
        {
          "name": "Get Positions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/positions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "positions"
              ]
            }
          }
        },
        {
          "name": "Get Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "orders"
              ]
            }
          }
        },
        {
          "name": "Get Trades",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/trades",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "trades"
              ]
            }
          }
        },
        {
          "name": "Get Funds",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/funds",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "funds"
              ]
            }
          }
        },
        {
          "name": "Get MF Holdings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/mf/holdings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "mf",
                "holdings"
              ]
            }
          }
        },
        {
          "name": "Get MF Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/mf/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "mf",
                "orders"
              ]
            }
          }
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/portfolio/profile",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "portfolio",
                "profile"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Zerodha",
      "description": "Follow these request in order to connect your Zerodha account.",
      "item": [
        {
          "name": "1. Setup Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "**INSTRUCTIONS**:\n1. Update Environment variables `zerodhaApiKey` and `zerodhaApiSecret`.\n2. Send this request.",
            "url": {
              "raw": "{{baseUrl}}/api/brokers/zerodha/credentials",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "zerodha",
                "credentials"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"apiKey\": \"{{zerodhaApiKey}}\",\n  \"apiSecret\": \"{{zerodhaApiSecret}}\"\n}"
            }
          }
        },
        {
          "name": "2. Get Login Link",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "description": "**INSTRUCTIONS**:\n1. Send this request.\n2. Copy the `loginUrl`.\n3. Open in Browser, Login.\n4. Copy `request_token` from URL bar after redirect.",
            "url": {
              "raw": "{{baseUrl}}/api/brokers/zerodha/connect",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "zerodha",
                "connect"
              ]
            }
          }
        },
        {
          "name": "3. Finalize Connection",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "description": "**INSTRUCTIONS**:\n1. Paste the `request_token` from browser into Body below.\n2. Send request.",
            "url": {
              "raw": "{{baseUrl}}/api/brokers/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "callback"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"broker\": \"zerodha\",\n  \"requestToken\": \"PASTE_TOKEN_HERE\"\n}"
            }
          }
        },
        {
          "name": "4. Verify Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "description": "Confirm status is CONNECTED.",
            "url": {
              "raw": "{{baseUrl}}/api/brokers/zerodha/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "zerodha",
                "status"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Upstox",
      "item": [
        {
          "name": "Login URL",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/login-url",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "login-url"
              ]
            }
          }
        },
        {
          "name": "OAuth Callback",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/callback",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "callback"
              ],
              "query": [
                {
                  "key": "code",
                  "value": "sample_auth_code"
                }
              ]
            }
          }
        },
        {
          "name": "Store Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/credentials",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "credentials"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"apiKey\": \"your_api_key\",\n  \"apiSecret\": \"your_api_secret\",\n  \"clientId\": \"your_client_id\",\n  \"authorizationCode\": \"auth_code_from_oauth\",\n  \"redirectUri\": \"http://localhost:8080/api/brokers/upstox/callback\"\n}"
            }
          }
        },
        {
          "name": "Holdings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/holdings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "holdings"
              ]
            }
          }
        },
        {
          "name": "Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/orders",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "orders"
              ]
            }
          }
        },
        {
          "name": "Positions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/positions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "positions"
              ]
            }
          }
        },
        {
          "name": "Account Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "status"
              ]
            }
          }
        },
        {
          "name": "Disconnect",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/upstox/disconnect",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "upstox",
                "disconnect"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "AngelOne",
      "item": [
        {
          "name": "Login URL",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/angelone/login-url",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "angelone",
                "login-url"
              ]
            }
          }
        },
        {
          "name": "Store Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/angelone/credentials",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "angelone",
                "credentials"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"apiKey\": \"your_api_key\",\n  \"clientId\": \"your_client_id\",\n  \"pin\": \"1234\",\n  \"totpSecret\": \"your_totp_secret\"\n}"
            }
          }
        },
        {
          "name": "Connect",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/angelone/connect",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "angelone",
                "connect"
              ]
            },
            "body": {
              "mode": "raw",
              "raw": "{\n  \"totp\": \"currrent_totp_code\"\n}"
            }
          }
        },
        {
          "name": "Holdings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/angelone/holdings",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "angelone",
                "holdings"
              ]
            }
          }
        },
        {
          "name": "Positions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/angelone/positions",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "angelone",
                "positions"
              ]
            }
          }
        },
        {
          "name": "Account Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/angelone/status",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "angelone",
                "status"
              ]
            }
          }
        },
        {
          "name": "Disconnect",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "http://localhost:8080/api/brokers/angelone/disconnect",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "api",
                "brokers",
                "angelone",
                "disconnect"
              ]
            }
          }
        }
      ]
    }
  ]
}
